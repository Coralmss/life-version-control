# Life Version Control - 完整需求文档

> 基于 2025-02-20 需求对齐整理

---

## 一、时间维度与视图

### 1.1 按「天」维度
- **完整时间轴**：展示当天所有记录的起止时间、顺序、时长
- **时间占比**：饼图形式展示当天各分类的时间分布

### 1.2 按「周」维度
- **时间占比**：饼图形式展示本周各分类的时间分布

### 1.3 按「月」维度
- **时间占比**：饼图形式展示本月各分类的时间分布

### 1.4 时间切换方式
- 以「天」为颗粒度切换
- 支持日期选择器选择具体某天
- 周/月视图下可切换具体周/月

---

## 二、分类与标签

### 2.1 状态分类（AI + 可编辑）
- **默认分类**：深度工作 / 浅层处理 / 休息放松 / 无意识摸鱼
- **AI 自动分类**：根据任务名称自动判断分类
- **允许手动修改**：用户可覆盖 AI 的分类结果
- **自定义标签**：用户可自主添加新的分类标签

### 2.2 精力标记（手动）
- 极度耗能 (-1) / 感觉平平 (0) / 满血复活 (+1)
- 保持用户手动选择，不做 AI 推断

---

## 三、AI 分析（完整列举）

### 3.1 时间占比分析
- 各分类（深度工作、浅层处理等）的时间占比
- 支持按天/周/月维度查看
- 饼图可视化

### 3.2 精力水平分析
- 精力状态随时间/任务的变化趋势
- 识别高耗能 vs 高恢复的任务类型
- 精力与任务分类的关联分析

### 3.3 任务切换分析
- 任务切换频率、切换模式
- 如何减少无效切换、提高专注度
- 建议：如「今日切换 12 次，建议减少碎片化」

### 3.4 行为洞察（当日时间利用）
- **待优化**：不太好的行为 + 如何改进
  - 例：无意识摸鱼占比过高、长时间未休息等
- **值得鼓励**：做得好的地方，正向反馈
  - 例：深度工作占比提升、休息节奏合理等

---

## 四、记录管理

### 4.1 查看记录
- 点击单条记录可查看详情（任务名、分类、起止时间、时长、精力标记等）

### 4.2 编辑记录
- 支持修改任务名称、分类、起止时间等

### 4.3 删除记录
- 支持删除单条记录

---

## 五、筛选

- **时间维度筛选**：按日期、周、月筛选记录

---

## 六、暂不实现

- 导出（CSV、周报等）— 后续再考虑

---

## 七、技术相关

### 7.1 AI API
- 接入外部 AI API
- 优先考虑免费/低成本方案（如 Groq、OpenAI 免费额度、Gemini 等）
- 具体 API 可后续替换

### 7.2 任务名称
- 支持较长任务名
- AI 需能根据任务名（含较长描述）判断分类

---

## 八、实现优先级

1. **Phase 1**：时间轴扩展
   - 按天/周/月切换
   - 天维度：完整时间轴 + 饼图占比
   - 周/月维度：饼图占比
   - 时间筛选

2. **Phase 2**：记录管理
   - 查看、编辑、删除记录

3. **Phase 3**：AI 能力
   - AI 自动分类（可手动覆盖）
   - 自定义分类标签
   - AI 分析（时间占比、精力、任务切换、行为洞察）

---

## 九、待确认项

### 9.1 时间轴可视化形式（已确认）
- **方案 D：时间块式**
- 支持**天**和**周**维度
- 天维度：24h 时间轴，任务以色块展示
- 周维度：7 天并排，每天一列时间块
- 不同分类标签可配置不同颜色

### 9.2 分类标签（已确认）
- **方案 A**：全局标签池，每条记录选一个主分类
- 用户可自主添加新的分类标签（加入全局池）
